<div ng-controller="BoardCtrl">
    <p>Enter the same Game ID as someone else to play on the same board!</p>
    <ul>
        <li><label>Game ID: <input ng-model="gameId" ng-change="connectGame()"></label></li>
        <li><button ng-click="resetBoard()">New Game</button></li>
        <li><label>Black AI:
            <pretty-checkbox ng-model="ai.black" ng-change="aiValueChanged"/>
        </label></li>
        <li><label>White AI:
            <pretty-checkbox ng-model="ai.white" ng-change="aiValueChanged"/>
        </label></li>
        <li>Turns taken: {{turn}}</li>
        <li>
            <span ng-show="turn%2 == 1 && !ended">White's turn <span class="ai-thinking" ng-show="ai.white">(AI thinking...)</span></span>
            <span ng-show="turn%2 == 0 && !ended">Black's turn <span class="ai-thinking" ng-show="ai.black">(AI thinking...)</span></span>
            <span ng-show="ended.whiteWin">White won!</span>
            <span ng-show="ended.blackWin">Black won!</span>
            <span ng-show="ended.draw">Game is draw!</span>
        </li>
    </ul>
    <div class="board">
        <table class="squares">
            <tr class="even"><td ng-click="selectSquare($event)" class="even escape"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even escape"></td></tr>
            <tr class="odd"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="even"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="odd"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="even"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="odd"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd throne"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="even"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="odd"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="even"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="odd"><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td></tr>
            <tr class="even"><td ng-click="selectSquare($event)" class="even escape"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even"></td><td ng-click="selectSquare($event)" class="odd"></td><td ng-click="selectSquare($event)" class="even escape"></td></tr>
        </table>
        <div class="piece" ng-hide="piece.dead" ng-click="selectPiece($index, $event)" ng-repeat="piece in pieces"
             style="top: {{piece.row * 30}}px; left: {{piece.col * 30}}px;">
            <div class="piece-border"></div>
            <div class="symbol white-pawn" ng-show="piece.white">♟</div>
            <div class="symbol black-pawn" ng-show="piece.black">♟</div>
            <div class="symbol white-king" ng-show="piece.whiteKing">♚</div>
        </div>
    </div>
    <div class="error {{(ai.serverError) ? 'visible' : ''}}">
        <span ng-show="ai.serverError.down">AI Server appears to be down.</span>
        <span ng-show="ai.serverError.busy">AI Server is overloaded.</span>
    </div>
    <div class="chat">
        <form ng-submit="chat()">
            <input ng-model="chatMessage" placeholder="chat message"></label>
        </form>
        <ul class="chat-history">
            <li ng-repeat="message in chatMessages | orderBy:'ts':'reverse'">{{message.text}}</li>
        </ul>
    </div>
</div>
